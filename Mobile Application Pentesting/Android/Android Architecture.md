![Android Stack](../../img/Pasted%20image%2020251105064335.png)
- Kernel - talks to the hardware.
- Native Daemons & Libraries - run in the background and interact directly to the kernel.
- Hardware Abstraction Layer (HAL) - allows hardware or software code to run despite whatever kernel version.
- Android Runtime (ART) - translate app's bytecode to processor specific instruction. ART was formerly known as the Dalvik.
- System Services - background process that communicate with lower-levels  yo allow use of hardware components. (power manager, account manager, battery service...). "Heart of Android"
- Android Framework - Java classes, interfaces, compiled code on which apps are built.
- Android API - API that developer use to talk to the system camera, external storage...
- System API - partner/OEMs APIs the developer does not have access to these.
- Dev Man App - pre-installed applications shipped with the device.
- Android App - this is what we test, mobile applications.
### Android Security 
- Device Encryption and File-based encryption
- SELinux
- Verified Boot 
- Application Sandbox: 
	- Each application will run with its own user, user are instead added to groups when permissions are granted (to use camera, connect internet...)
	- No application can have access to other applications.
	- Permissions: Install-time permissions, normal permissions, runtime permissions (user-consent), special permissions, signature permissions.
- Network security TLS by default, DNS over TLS.
- ASLR, KASLR, PIE, DEP, SECCOMP, filters system calls made by user applications.
### Android App Run
1. User taps icon: Android Activity Manager (part of System Services) handles request
2. Android System Checks if app already running
	- If running, existing process is foreground
	- Else new process created
3. Zygote does it thing
4. Activity Manager Service (AMS) coordinates app launch.
5. Memory low then free up space background process to run app.
6. If user closes app, process may remain in memory for faster relaunch.
### Zygote
- Pre-initialized process that serves as the "parent" of all Android app processes (android.app., android.os., android.view.).
- Starts during device boot-up and loads essential libraries, system classes and the ART.
- All processes are to be forked from Zygote instead of being created from scratch, all child process inherits preloaded classes and resources.